#!/usr/bin/python3
# coding=utf8


import re
from random import randint

from wxpy import *
import schedule
import time

# æ³¨å†Œæœºå™¨äºº
bot = Bot(cache_path=True, console_qr=2)
bot.enable_puid('wxpy_puid.pkl')
rebot = bot.groups().search('ç¾¤èŠ123')  # éœ€è¦åŠ å…¥çš„ç¾¤




# åˆ¤æ–­æ˜¯å¦ä¸ºæ–°ç”¨æˆ·å…¥ç¾¤
invite_compile = re.compile(r'é‚€è¯·"(.*?)"åŠ å…¥äº†ç¾¤èŠ\s*$')
# æ–°ç”¨æˆ·å…¥ç¾¤å‘é€çš„å…¬å‘Š
rebot_msg = '''@{atname}\u2005\u2005\u2005 ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³æ¬¢è¿æˆ˜å‹å…¥ç¾¤\n
'''

def what_TOP():
    food_list=["å¨å¸ˆå¾®åšï¼š",'å¨å¸ˆé‚®ç®±ï¼š','å¨å¸ˆæ¨ç‰¹ï¼š']
    random_number=randint(0,len(food_list)-1)
    return food_list[random_number]


# æ³¨å†Œç¾¤æ¥æŠ“ç¾¤ç¾¤æ¶ˆæ¯

@bot.register(rebot, NOTE)
def invite_group(msg):
    """ ç¾¤é€šçŸ¥å¤„ç† """
    text = msg.text  # é€šçŸ¥çš„å†…å®¹
    member = msg.member.name  # æ¶ˆæ¯å‘é€è€…æ˜µç§°
    invite_names = invite_compile.findall(text)  # åˆ¤æ–­æ˜¯å¦æ˜¯åŠ å…¥äº†æ–°ç”¨æˆ·
    if invite_names:  # ç”¨äºé‚€è¯·
        invite_name = invite_names[0]  # åŠ å…¥è€…çš„æ˜µç§°
        if rebot_msg:
            note = rebot_msg.format(atname=invite_name)
            msg.sender.send(note)  # å‘ç¾¤é‡Œå‘é€æ¬¢è¿è¯­å¥
        return

@bot.register(rebot, TEXT)
def print_group_msg(msg):
    text1 =msg.text
    if msg.is_at:
        print(msg)
        if 'æŠ•è¯‰' in text1:
            msg.reply('æŠ•è¯‰11111')
        elif 'æ”¶é›†' in text1:
            msg.reply('æ”¶é›†22222' )
        else:
            msg.reply('æ— æ³•è¯†åˆ«æŒ‡ä»¤'+' '+what_TOP())




while True:
    schedule.run_pending()
    time.sleep(4)
